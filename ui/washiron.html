<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="icon" type="image/png" href="/logo-sm.png" />
  <link rel="stylesheet" href="css/style.css">
  <title>Campus Laundry</title>
</head>

<body>
  <header>
    <nav class="header__nav">
      <div class="header__logo">
        <img src="assets/Logo.png" alt="logo" />
        <div class="header__logo-overlay"></div>
      </div>

      <ul class="header__menu" data-aos="fade-down">
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/#menu">Membership</a>
        </li>
        <li>
          <a href="/#food">WHY US</a>
        </li>
        <li>
          <a href="/#services">CONTACT US</a>
        </li>
        <li>
          <a href="">Login</a>
        </li>
      </ul>

      <ul class="header__menu-mobile" data-aos="fade-down">
        <li>
          <img src="/assets/menu.svg" alt="menu" />
        </li>
      </ul>
    </nav>
  </header>
  <br>
  <br>
  <div class="container-fluid">
    <div class="div">
      <img src="assets/Trees-Pattern.png" class="img-fluid" alt="img">
    </div>
    <br>
    <br>
    <div class="container text-center">
      <div class="row align-items-start">
        <div class="col-4">
          <h1 class="display-6">Your Load Meter</h1>
        </div>
        <div class="col-8">
          <br>
          <div class="progress" role="progressbar" aria-label="Load" aria-valuenow="0" aria-valuemin="0"
            aria-valuemax="100" id="load-progress" style="background-color: gray;">
            <div class="progress-bar" style="width: 0%; background-color: #4A5667;"></div>
          </div>
        </div>
      </div>
      <br>
      <a href="/machine.html">
      <button type="button" class="btn btn-primary" id="setup-machine-btn" disabled>Setup Machine</button>
    </a>
      <br>
      <br>

      <div class="row" id="clothing-items">
        <!-- Clothing items will be generated dynamically here -->
      </div>
    </div>
  </div>

  <script async src="https://cdn.jsdelivr.net/npm/es-module-shims@1/dist/es-module-shims.min.js"
    crossorigin="anonymous"></script>
  <script type="importmap">
    {
      "imports": {
        "@popperjs/core": "https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js",
        "bootstrap": "https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.esm.min.js"
      }
    }
  </script>
  <script type="module">
    import * as bootstrap from 'bootstrap'

    // Dynamic data for clothing items
    const clothingData = [
      { name: 'Shirt', image: 'assets/shirt.png', load: 10 },
      { name: 'T-Shirt', image: 'assets/polo.png', load: 10 },
      { name: 'Pant', image: 'assets/pants.png', load: 10 },
      { name: 'Shorts', image: 'assets/shorts.png', load: 6 },
      { name: 'Dress', image: 'assets/dress.png', load: 14 },
      { name: 'Skirt', image: 'assets/skirt.png', load: 14 },
      { name: 'Jeans', image: 'assets/jeans.png', load: 14 },
      { name: 'Jacket', image: 'assets/jacket.png', load: 20 },
      { name: 'Socks', image: 'assets/socks.png', load: 4 }
    ];

    let currentLoad = 0;
    const itemCounts = new Array(clothingData.length).fill(0);

    // Function to generate clothing items dynamically
    function generateClothingItems() {
      const clothingItemsContainer = document.getElementById('clothing-items');

      clothingData.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'col';
        card.innerHTML = `
          <br>
          <div class="card" style="width: 30rem;">
            <div class="row align-items-start" style="margin: 20px;">
              <div class="col-6">
                <img src="${item.image}" class="card-img-top" alt="${item.name}" style="width: 80%;">
              </div>
              <div class="col-6">
                <div class="card-body">
                  <br>
                  <h5 class="card-title">${item.name}</h5>
                  <div class="container text-center">
                    <br> <br>
                    <div class="row">
                      <div class="col">
                        <button type="button" class="btn btn-secondary minus-btn" data-index="${index}" disabled>-</button>
                      </div>
                      <div class="col">
                        <p class="item-count">0</p>
                      </div>
                      <div class="col">
                        <button type="button" class="btn btn-secondary plus-btn" data-index="${index}">+</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        clothingItemsContainer.appendChild(card);
      });

      // Add event listeners to buttons
      const minusButtons = document.querySelectorAll('.minus-btn');
      const plusButtons = document.querySelectorAll('.plus-btn');

      minusButtons.forEach((button) => {
        button.addEventListener('click', () => updateItemCount(button.dataset.index, -1));
      });

      plusButtons.forEach((button) => {
        button.addEventListener('click', () => updateItemCount(button.dataset.index, 1));
      });
    }

    // Call the function to generate clothing items
    generateClothingItems();

    // Function to update item count and load
    function updateItemCount(index, value) {
      const itemCountElements = document.querySelectorAll('.item-count');
      const currentCount = itemCounts[index];
      const newCount = Math.max(0, currentCount + value);
      itemCounts[index] = newCount;
      itemCountElements[index].innerText = newCount;

      // Update currentLoad and progress bar
      const loadProgress = document.getElementById('load-progress');
      currentLoad += value * clothingData[index].load;
      currentLoad = Math.max(0, Math.min(currentLoad, 100));
      loadProgress.setAttribute('aria-valuenow', currentLoad);
      loadProgress.style.width = currentLoad + '%';

      // Change progress bar color to blue when adding clothes
      loadProgress.style.backgroundColor = '#4A5667';

      // Enable/Disable "Setup Machine" button based on currentLoad
      const setupMachineBtn = document.getElementById('setup-machine-btn');
      setupMachineBtn.disabled = currentLoad === 0 ? true : false;

      // Disable "Add" button if load is at 100
      const plusButtons = document.querySelectorAll('.plus-btn');
      plusButtons.forEach((button) => {
        if (currentLoad === 100) {
          button.disabled = true;
        } else {
          button.disabled = false;
        }
      });

      // Enable/Disable "Minus" button based on item count
      const minusButtons = document.querySelectorAll('.minus-btn');
      minusButtons.forEach((button, buttonIndex) => {
        button.disabled = itemCounts[buttonIndex] === 0 ? true : false;
      });
    }
  </script>
</body>

</html>
